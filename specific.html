<!DOCTYPE html>
<html>
 	<body>
	<h1>REFERRING USER</h1>
	<input id="referring" type="text">
	<br>
 	<input type="button" value="login" onclick="loginReferring()">
	<br>
	<input id="button" type="button" value="share" onclick="share()">
	<br>
	<a id="anchor" href="#">Your deep link</a>
	<br>
	<input type="button" value="logout" onclick="logout()">
	<p>
	<h1>REFERRED USER</h1>
	<input id="referred" type="text">
	<br>
 	<input type="button" value="login" onclick="loginReferred()">
 	<br>
	<input type="button" value="trigger" onclick="triggerEvent()">
	<br>
	<input type="button" value="logout" onclick="logout()">

	<script type="text/javascript">
    (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent".split(" "), 0);

   	branch.init('key_test_oduVdGLurvEoBZaS5h5zzpelrwgSe85K');

	function triggerEvent() {
		branch.track('job_posted');
		alert("success!");
	}

	function loginReferring() {
		var id = document.getElementById("referring").value;
		branch.setIdentity(id);
		alert("success!");
	}

	function loginReferred() {
		var id = document.getElementById("referred").value;
		branch.setIdentity(id);
		alert("success!");
	}

	function logout() {
		branch.logout();
		alert("success!");
	}

	function share() {
		var linkData = {
		  data: {
		    '$desktop_url': 'http://localhost:8000/web-referral.html'
		  }
		};

		branch.link(linkData, function(err, link) {
		  // bind elements
			document.getElementById('button').onclick = function() {
				window.open(link || err);
			};
			document.getElementById('anchor').href = link || err;
			document.getElementById('anchor').innerHTML = link || err;
		});
		alert("success!");
	}

	</script>

 	</body>
</html>
